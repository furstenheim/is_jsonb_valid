-- $id inside an unknown keyword is not a real identifier
-- type matches second anyOf, which has a real schema in it
SELECT is_jsonb_valid_draft_v7('{"definitions":{"id_in_unknown0":{"not":{"array_of_schemas":[{"$id":"https://localhost:1234/unknownKeyword/my_identifier.json","type":"null"}]}},"real_id_in_schema":{"$id":"https://localhost:1234/unknownKeyword/my_identifier.json","type":"string"},"id_in_unknown1":{"not":{"object_of_schemas":{"foo":{"$id":"https://localhost:1234/unknownKeyword/my_identifier.json","type":"integer"}}}}},"anyOf":[{"$ref":"#/definitions/id_in_unknown0"},{"$ref":"#/definitions/id_in_unknown1"},{"$ref":"https://localhost:1234/unknownKeyword/my_identifier.json"}]}', '"a string"');
-- type matches non-schema in first anyOf
SELECT is_jsonb_valid_draft_v7('{"definitions":{"id_in_unknown0":{"not":{"array_of_schemas":[{"$id":"https://localhost:1234/unknownKeyword/my_identifier.json","type":"null"}]}},"real_id_in_schema":{"$id":"https://localhost:1234/unknownKeyword/my_identifier.json","type":"string"},"id_in_unknown1":{"not":{"object_of_schemas":{"foo":{"$id":"https://localhost:1234/unknownKeyword/my_identifier.json","type":"integer"}}}}},"anyOf":[{"$ref":"#/definitions/id_in_unknown0"},{"$ref":"#/definitions/id_in_unknown1"},{"$ref":"https://localhost:1234/unknownKeyword/my_identifier.json"}]}', 'null');
-- type matches non-schema in third anyOf
SELECT is_jsonb_valid_draft_v7('{"definitions":{"id_in_unknown0":{"not":{"array_of_schemas":[{"$id":"https://localhost:1234/unknownKeyword/my_identifier.json","type":"null"}]}},"real_id_in_schema":{"$id":"https://localhost:1234/unknownKeyword/my_identifier.json","type":"string"},"id_in_unknown1":{"not":{"object_of_schemas":{"foo":{"$id":"https://localhost:1234/unknownKeyword/my_identifier.json","type":"integer"}}}}},"anyOf":[{"$ref":"#/definitions/id_in_unknown0"},{"$ref":"#/definitions/id_in_unknown1"},{"$ref":"https://localhost:1234/unknownKeyword/my_identifier.json"}]}', '1');